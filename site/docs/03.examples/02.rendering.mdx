export const metadata = {
  title: 'Rendering',
}

# Rendering Examples

Examples can be rendered in MDX using the [[Example]] and [[Preview]] components. These components take a `source` prop, which is the name of the example file or code block in any of the [locations examples can exist](./01.writing.mdx).

As an illustration of how this works, let's say we have the following file structure:

```
├── examples
│   ├── Basic.tsx
│   └── Advanced.tsx
└── README.mdx
```

We can now render the `basic` example in our README like so:

```mdx
<Example source="Basic.tsx" />
```

## Code Block Examples

When declaring a code block in MDX, you can target the filename prop to render the example:

````mdx
```Basic.tsx
export const Basic = () => <div>Basic</div>
```

<Example source="Basic.tsx" />
````

Or if no source is provided the first previous code block will be used.

````mdx
```tsx
export const Basic = () => <div>Basic</div>
```

<Preview />
````

## Templating

While the [[Example]] component is great for content like a blog and one-off situations. It's not very useful for a library, or automated documentation. For this, you can lean on your specific build tool to handle the templating and query the information available in the collected data.

Using Next.js, we can create a custom component that will render the example based on the name of the example file:

```tsx filename="[component]/page/[example]/page.tsx"
import * as React from 'react'
import { notFound } from 'next/navigation'
import type { Metadata } from 'next'
import { loadModules } from 'mdxts'

type Props = {
  params: {
    componentSlug: string
    exampleSlug: string
  }
}

const allComponents = loadModules(
  require.context('./components', true, /README\.mdx$/, 'lazy')
)

export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const component = await allComponents.get(params.componentSlug)
  const example = await component.examples.get(params.exampleSlug)
  return {
    title: `${component.title} / ${example.title}`,
  }
}

export default async function Examples({ params }: Props) {
  const component = await allComponents.get(params.componentSlug)

  if (!component) {
    return notFound()
  }

  const example = await component.examples.get(params.exampleSlug)

  if (!example) {
    return notFound()
  }

  const { Component } = example

  return <Component />
}
```
