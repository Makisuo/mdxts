export const metadata = {
  title: 'Rendering',
}

# Rendering Examples

Examples can be rendered in MDX using the [[Example]] and [[Preview]] components. These components take a `source` prop, which is the name of the example file or code block in any of the [locations examples can exist](./01.writing.mdx).

As an illustration of how this works, let's say we have the following file structure:

```
├── examples
│   ├── Basic.tsx
│   └── Advanced.tsx
└── README.mdx
└── Button.tsx
```

We can now render the `Basic.tsx` example in the README like so:

```mdx
# Button Examples

<Example source="Basic.tsx" />
```

## Code Block Examples

When declaring a code block in MDX, you can target the filename prop to render the example:

````mdx
```Basic.tsx
export const Basic = () => <div>Basic</div>
```

<Example source="Basic.tsx" />
````

## Templating

While the `Example` component is great for content like a blog and one-off situations. It's not very useful for a library, or automated documentation.

For this, you can lean on your specific build tool to handle the templating and query the information available in the collected data. Using Next.js, we can create a custom component that will render the example based on the name of the example file:

{/* TODO: Use real example from site here <Code source="../../app/(examples)/components/[component]/examples/[example]/page.tsx" baseDirectory="../../app/(examples)" /> */}

```tsx filename="components/[component]/examples/[example]/page.tsx"
import * as React from 'react'
import { notFound } from 'next/navigation'
import type { Metadata } from 'next'
import { createDataSource } from 'mdxts'

const allComponents = createDataSource('./components/*.tsx')

export async function generateStaticParams() {
  const sourceFiles = await allComponents.all()

  return Object.entries(sourceFiles)
    .filter(([, component]) => component.examples?.length > 0)
    .flatMap(([pathname, component]) => {
      return component.examples.map((example) => ({
        component: pathname,
        example: example.slug,
      }))
    })
}

export default async function Page({
  params,
}: {
  params: { component: string; example: string }
}) {
  const component = await allComponents.get(params.component)

  if (component === null) {
    return notFound()
  }

  const example = component.examples?.find(
    (example) => example.slug === params.example
  )

  if (example === undefined) {
    return notFound()
  }

  const { default: Component } = await example.module

  return <Component />
}
```
